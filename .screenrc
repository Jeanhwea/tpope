# ~/.screenrc

startup_message off
shell -$SHELL
hardstatus on
hardstatus lastline '%H:  %-Lw%34>[%n*%f %t]%+Lw'
escape ^\\\ # Ctrl+\ as escape command.
bindkey ^Q command
defnonblock on
defscrollback 1024
termcapinfo xterm*|rxvt*|kterm*|Eterm*|putty*|dtterm* WS=\E[8;%d;%dt
termcapinfo xterm*|rxvt*|kterm*|Eterm*|putty*|dtterm* ti@:te@:G0
termcapinfo xterm*|rxvt*|kterm*|Eterm*|putty*|dtterm* hs:ts=\E]2;:fs=\007:ds=\E]2;8)\007
termcapinfo xterm*|rxvt*|kterm*|Eterm*|putty*|dtterm* XT
termcapinfo Eterm*|linux* C8
termcapinfo rxvt*|Eterm* "" *7=\E[8$:%i=\E[c:#4=\E[d:#2=\E[7$
termcapinfo xterm*      "" *7=\E[2F:%i=\E[2C:#4=\E[2D:#2=\E[2H
defflow off
windowlist string "%3n %{= dd}%?%h%:%t%?%=%f%{-}"
caption    string "%?%F%{y}%?%3n %{= wk}%?%h%:%t%?%{-}"
activity "Activity in window %n (%t)^G^G"
bell_msg "Bell in window %n (%t)^G"

bind  j next
bind ^J next
bind  k prev
bind ^K prev
bind  K kill
bind  ` select 0
bind  e screen -ln vim
bind ^E screen -ln vim
bind  R screen -fn -ln irb
bind ^O colon "screen -ln ssh "
bind  o colon "screen -ln ssh "
bind  S eval "height 50" "split"
bind  Q eval "hardstatus message '%H:  %-Lw%34>[%n*%f %t]%+Lw'" "only" "height 24"
bind ^U screen -ln -fn -t uptime sh -c 'echo -ne "\e]0;Uptime\a"; export TERMINAL=1; while clear >/tmp/ruptime.$$; do echo "HOST      STATUS       TIME        USERS   LOAD" >>/tmp/ruptime.$$; tpope ruptime >>/tmp/ruptime.$$; if [ `(cat /tmp/ruptime.$$; tpope rwho)|wc -l` -le 22 ]; then echo >>/tmp/ruptime.$$; tpope rwho >>/tmp/ruptime.$$; fi; cat /tmp/ruptime.$$; rm -f /tmp/ruptime.$$; sleep 15; done'
bind ^B eval "hardcopy_append off" "hardcopy -h /tmp/.$LOGNAME-screen-urlview" "screen -fn -ln -t urlview urlview /tmp/.$LOGNAME-screen-urlview"
bind ^Y eval "copy" "stuff kY" "paste ."
bind  y eval "copy" "stuff kY" "paste ."

# press <Insert>[Letter] to ssh to a given host
bind -c ssh  " " screen
bind -c ssh  "a" screen -ln -fn sh -c "exec ssh `hostinfo -h A`"
bind -c ssh  "b" screen -ln -fn sh -c "exec ssh `hostinfo -h B`"
bind -c ssh  "c" screen -ln -fn sh -c "exec ssh `hostinfo -h C`"
bind -c ssh  "d" screen -ln -fn sh -c "exec ssh `hostinfo -h D`"
bind -c ssh  "e" screen -ln -fn sh -c "exec ssh `hostinfo -h E`"
bind -c ssh  "f" screen -ln -fn sh -c "exec ssh `hostinfo -h F`"
bind -c ssh  "g" screen -ln -fn sh -c "exec ssh `hostinfo -h G`"
bind -c ssh  "h" screen -ln -fn sh -c "exec ssh `hostinfo -h H`"
bind -c ssh  "i" screen -ln -fn sh -c "exec ssh `hostinfo -h I`"
bind -c ssh  "j" screen -ln -fn sh -c "exec ssh `hostinfo -h J`"
bind -c ssh  "k" screen -ln -fn sh -c "exec ssh `hostinfo -h K`"
bind -c ssh  "l" screen -ln -fn sh -c "exec ssh `hostinfo -h L`"
bind -c ssh  "m" screen -ln -fn sh -c "exec ssh `hostinfo -h M`"
bind -c ssh  "n" screen -ln -fn sh -c "exec ssh `hostinfo -h N`"
bind -c ssh  "o" screen -ln -fn sh -c "exec ssh `hostinfo -h O`"
bind -c ssh  "p" screen -ln -fn sh -c "exec ssh `hostinfo -h P`"
bind -c ssh  "q" screen -ln -fn sh -c "exec ssh `hostinfo -h Q`"
bind -c ssh  "r" screen -ln -fn sh -c "exec ssh `hostinfo -h R`"
bind -c ssh  "s" screen -ln -fn sh -c "exec ssh `hostinfo -h S`"
bind -c ssh  "t" screen -ln -fn sh -c "exec ssh `hostinfo -h T`"
bind -c ssh  "u" screen -ln -fn sh -c "exec ssh `hostinfo -h U`"
bind -c ssh  "v" screen -ln -fn sh -c "exec ssh `hostinfo -h V`"
bind -c ssh  "w" screen -ln -fn sh -c "exec ssh `hostinfo -h W`"
bind -c ssh  "x" screen -ln -fn sh -c "exec ssh `hostinfo -h X`"
bind -c ssh  "y" screen -ln -fn sh -c "exec ssh `hostinfo -h Y`"
bind -c ssh  "z" screen -ln -fn sh -c "exec ssh `hostinfo -h Z`"

bindkey -k kI command -c ssh

bind -c shiftalt A copy  # Up
bind -c shiftalt B colon
bind -c shiftalt C next
bind -c shiftalt D prev
bind -c shiftalt P windowlist -b # F1
bind -c shiftalt Q screen
bind -c shiftalt R select 0
bind -c shiftalt S select 1
bind -c shiftalt ~ command -c ssh
bind -c shiftalt 0 stuff ^[[20
bind -c shiftalt 1 stuff ^[[21
bind -c shiftalt 3 stuff ^[[23
bind -c shiftalt 4 stuff ^[[24

bindkey -d -k kD
bindkey -d -k kb
bindkey ^[^[[	command -c shiftalt # Rxvt/PuTTY Alt
bindkey ^[^[O	command -c shiftalt # Rxvt/PuTTY Alt
bindkey ^[O2	command -c shiftalt # XTerm F-Key Shift
bindkey ^[O3	command -c shiftalt # XTerm F-Key Alt
#bindkey ^[O5	command -c shiftalt # XTerm F-Key Ctrl
bindkey ^[[2	command -c shiftalt # XTerm Arrow Shift
#bindkey ^[[3	command -c shiftalt # XTerm Arrow Alt
#bindkey ^[[5	command -c shiftalt # XTerm Arrow Ctrl
bindkey ^[[1;2	command -c shiftalt # XTerm Newest Shift
bindkey ^[[1;3	command -c shiftalt # XTerm Newest Alt
#bindkey ^[[1;5	command -c shiftalt # XTerm Newest Ctrl

bindkey "^[^I"    focus # Alt+Tab
bindkey ^[[Z      focus # Shift+Tab
bindkey ^[[a      copy  # Rxvt/Eterm Shift
bindkey ^[[b      colon
bindkey ^[[c      next
bindkey ^[[d      prev
bindkey ^[Oa      copy  # Eterm Ctrl
bindkey ^[Ob      colon
bindkey ^[Oc      next
bindkey ^[Od      prev
bindkey ^[^[[3~   detach # Alt+Delete
bindkey ^[[3;3~   detach

bindkey ^[[24~    screen
bindkey ^[[25~    select 0
bindkey ^[[26~    select 1
bindkey ^[[28~    select 2
bindkey ^[[15;2~  select 2
bindkey ^[[29~    select 3
bindkey ^[[17;2~  select 3
bindkey ^[[31~    select 4
bindkey ^[[18;2~  select 4
bindkey ^[[32~    select 5
bindkey ^[[19;2~  select 5
bindkey ^[[33~    select 6
bindkey ^[[20;2~  select 6
bindkey ^[[34~    select 7
bindkey ^[[21;2~  select 7
bindkey ^[[23\$   select 8
bindkey ^[[23;2~  select 8
bindkey ^[[24\$   select 9
bindkey ^[[24;2~  select 9
